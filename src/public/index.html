<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸŒ‰</text></svg>">
  <title>Screenshot Bridge</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="markup.css">
</head>
<body>
  <div class="app">
    <header class="header">
      <div class="header-left">
        <div class="logo">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <rect x="1" y="1" width="18" height="18" rx="2" stroke="currentColor" stroke-width="1.5"/>
            <path d="M5 14L8 10L11 12L15 7" stroke="var(--accent)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="14" cy="6" r="1.5" fill="var(--accent)"/>
          </svg>
          <span class="logo-text">Screenshot Bridge</span>
        </div>
        <div class="connection-status" id="connectionStatus" title="Disconnected">
          <span class="status-dot"></span>
        </div>
      </div>
      <button class="btn-theme" id="themeToggle" title="Toggle light/dark mode">
        <svg class="icon-sun" width="16" height="16" viewBox="0 0 16 16" fill="none">
          <circle cx="8" cy="8" r="3" stroke="currentColor" stroke-width="1.3"/>
          <path d="M8 1v2M8 13v2M1 8h2M13 8h2M3.05 3.05l1.41 1.41M11.54 11.54l1.41 1.41M3.05 12.95l1.41-1.41M11.54 4.46l1.41-1.41" stroke="currentColor" stroke-width="1.3" stroke-linecap="round"/>
        </svg>
        <svg class="icon-moon" width="16" height="16" viewBox="0 0 16 16" fill="none">
          <path d="M13.5 8.5a5.5 5.5 0 01-6-6 5.5 5.5 0 106 6z" stroke="currentColor" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
      <button class="btn-clear" id="clearAllBtn" title="Clear all screenshots">
        <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
          <path d="M2 4h10M5 4V3a1 1 0 011-1h2a1 1 0 011 1v1M9 7v4M5 7v4M3 4l.5 7.5a1 1 0 001 .5h5a1 1 0 001-.5L11 4" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        Clear All
      </button>
    </header>

    <nav class="project-tabs" id="projectTabs" hidden>
      <div class="project-tabs-inner" id="projectTabsInner"></div>
    </nav>

    <div class="project-status" id="projectStatus">
      <span class="project-status-label">Sending to:</span>
      <span class="project-status-name" id="projectStatusName">default</span>
      <span class="project-status-sep">&middot;</span>
      <span class="project-status-sessions" id="projectStatusSessions"></span>
    </div>

    <main class="main">
      <div class="capture-section">
        <div class="drop-zone" id="dropZone" tabindex="0">
          <div class="drop-zone-inner" id="dropZoneInner">
            <div class="drop-zone-icon">
              <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                <rect x="4" y="8" width="40" height="32" rx="3" stroke="currentColor" stroke-width="2" stroke-dasharray="4 3"/>
                <path d="M16 28l6-8 5 6 7-10" stroke="var(--accent)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <circle cx="34" cy="18" r="3" stroke="var(--accent)" stroke-width="2"/>
              </svg>
            </div>
            <p class="drop-zone-text">Paste or drop a screenshot</p>
            <p class="drop-zone-hint"><kbd id="pasteModifier">Ctrl</kbd><span>+</span><kbd>V</kbd> or drag &amp; drop</p>
            <button class="btn-clipboard" id="clipboardBtn" hidden>
              <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
                <rect x="3" y="1" width="8" height="2" rx="1" stroke="currentColor" stroke-width="1.2"/>
                <rect x="2" y="2.5" width="10" height="10" rx="1.5" stroke="currentColor" stroke-width="1.2"/>
              </svg>
              Paste from clipboard
            </button>
          </div>

          <div class="preview" id="preview" hidden>
            <div class="markup-container" id="markupContainer">
              <img id="previewImg" alt="Preview">
              <svg class="markup-overlay" id="markupOverlay" xmlns="http://www.w3.org/2000/svg"></svg>
            </div>
            <button class="preview-discard" id="discardBtn" title="Discard">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                <path d="M4 4l8 8M12 4l-8 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
              </svg>
            </button>
          </div>
        </div>

        <div class="markup-toolbar" id="markupToolbar" hidden>
          <button class="markup-tool-btn" data-tool="move" title="Move (M)">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M8 2v12M2 8h12M8 2l-2 2M8 2l2 2M8 14l-2-2M8 14l2-2M2 8l2-2M2 8l2 2M14 8l-2-2M14 8l-2 2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
            <kbd>M</kbd>
          </button>
          <button class="markup-tool-btn" data-tool="arrow" title="Arrow (A)">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M3 13L13 3M13 3H7M13 3v6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
            <kbd>A</kbd>
          </button>
          <button class="markup-tool-btn" data-tool="box" title="Box (B)">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><rect x="2" y="3" width="12" height="10" rx="1" stroke="currentColor" stroke-width="1.5" stroke-dasharray="3 2"/></svg>
            <kbd>B</kbd>
          </button>
          <button class="markup-tool-btn" data-tool="text" title="Text (T)">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M4 4h8M8 4v9M6 13h4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
            <kbd>T</kbd>
          </button>
          <button class="markup-tool-btn" data-tool="pin" title="Pin (P)">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><circle cx="8" cy="7" r="4" stroke="currentColor" stroke-width="1.5"/><path d="M8 11v3" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
            <kbd>P</kbd>
          </button>
          <div class="markup-sep"></div>
          <button class="markup-clear-btn" id="markupClearBtn">Clear</button>
        </div>

        <div class="send-bar" id="sendBar" hidden>
          <input type="text" class="prompt-input" id="promptInput" placeholder="Add context or prompt (optional)" autocomplete="off">
          <button class="btn-mic" id="micBtn" title="Voice input" hidden>
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
              <rect x="5.5" y="1" width="5" height="9" rx="2.5" stroke="currentColor" stroke-width="1.3"/>
              <path d="M3 7a5 5 0 0010 0M8 12v3" stroke="currentColor" stroke-width="1.3" stroke-linecap="round"/>
            </svg>
          </button>
          <button class="btn-send" id="sendBtn">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
              <path d="M2 8h12M10 4l4 4-4 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Send
          </button>
        </div>
      </div>

      <section class="history-section" id="historySection">
        <div class="history-header">
          <h2 class="history-title">History</h2>
          <span class="history-count" id="historyCount"></span>
          <div class="history-header-actions">
            <div class="search-bar" id="searchBar">
              <svg class="search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none">
                <circle cx="6" cy="6" r="4.5" stroke="currentColor" stroke-width="1.2"/>
                <path d="M9.5 9.5L13 13" stroke="currentColor" stroke-width="1.2" stroke-linecap="round"/>
              </svg>
              <input type="text" class="search-input" id="searchInput" placeholder="Search prompts, descriptions, branches..." autocomplete="off">
              <div class="search-filters" id="searchFilters">
                <select class="search-select" id="filterStatus">
                  <option value="">All status</option>
                  <option value="pending">Pending</option>
                  <option value="delivered">Delivered</option>
                </select>
              </div>
              <button class="search-clear" id="searchClear" hidden title="Clear search">
                <svg width="12" height="12" viewBox="0 0 12 12" fill="none">
                  <path d="M3 3l6 6M9 3l-6 6" stroke="currentColor" stroke-width="1.2" stroke-linecap="round"/>
                </svg>
              </button>
            </div>
          </div>
        </div>
        <div class="bulk-bar" id="bulkBar" hidden>
          <span class="bulk-count" id="bulkCount">0 selected</span>
          <button class="bulk-btn bulk-btn-select-all" id="bulkSelectAll">Select all</button>
          <button class="bulk-btn bulk-btn-deselect" id="bulkDeselect">Deselect</button>
          <button class="bulk-btn bulk-btn-delete" id="bulkDelete">Delete selected</button>
        </div>
        <div class="history-list" id="historyList">
          <div class="history-empty" id="historyEmpty">
            <p>No screenshots yet</p>
          </div>
        </div>
      </section>
    </main>
  </div>

  <div class="lightbox" id="lightbox" hidden>
    <div class="lightbox-backdrop"></div>
    <div class="lightbox-content">
      <img class="lightbox-img" id="lightboxImg" alt="">
      <div class="lightbox-caption" id="lightboxCaption"></div>
      <a class="lightbox-download" id="lightboxDownload" title="Download" download>
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
          <path d="M10 3v11M6 10l4 4 4-4M3 15h14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </a>
      <button class="lightbox-close" id="lightboxClose" title="Close (Esc)">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
          <path d="M5 5l10 10M15 5l-10 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
        </svg>
      </button>
    </div>
  </div>

  <div class="shortcut-overlay" id="shortcutOverlay" hidden>
    <div class="shortcut-backdrop"></div>
    <div class="shortcut-panel">
      <h3 class="shortcut-title">Keyboard Shortcuts</h3>
      <div class="shortcut-grid">
        <div class="shortcut-group">
          <h4>General</h4>
          <div class="shortcut-row"><kbd>Ctrl+V</kbd><span>Paste screenshot</span></div>
          <div class="shortcut-row"><kbd>Esc</kbd><span>Close overlay / deselect tool</span></div>
          <div class="shortcut-row"><kbd>?</kbd><span>Toggle this help</span></div>
          <div class="shortcut-row"><kbd>/</kbd><span>Focus search</span></div>
        </div>
        <div class="shortcut-group">
          <h4>Markup Tools</h4>
          <div class="shortcut-row"><kbd>M</kbd><span>Move tool</span></div>
          <div class="shortcut-row"><kbd>A</kbd><span>Arrow tool</span></div>
          <div class="shortcut-row"><kbd>B</kbd><span>Box tool</span></div>
          <div class="shortcut-row"><kbd>T</kbd><span>Text tool</span></div>
          <div class="shortcut-row"><kbd>P</kbd><span>Pin tool</span></div>
          <div class="shortcut-row"><kbd>Ctrl+Z</kbd><span>Undo</span></div>
          <div class="shortcut-row"><kbd>Ctrl+Shift+Z</kbd><span>Redo</span></div>
        </div>
      </div>
      <button class="shortcut-close" id="shortcutClose">Close</button>
    </div>
  </div>

  <div class="toast-container" id="toastContainer"></div>
  <script src="markup.js"></script>
  <script src="app.js"></script>
</body>
</html>
